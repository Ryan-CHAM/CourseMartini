<div style="margin:0% 10%">
<div class="container">
  <div class="row">
  <!--Div that will hold the bubble chart-->
      <div id="textstyle" style="width: 1350px; height: 750px; margin: 0 auto"></div>
      <div id="chart_div" style="width: 1350px; height: 750px; margin: 0 auto"></div>

<%# Jimmy's part %>
     <div class="col-lg-10 offset-lg-1">
        <div class="user_form" style="margin-bottom: 50px">
          <div class="col-lg-10 offset-lg-1">
            <div class="card-columns">
              <%if @comments != nil%>
                <% @comments.each do |comment| %>
                    <div class="text_box">
                      <div class="card" style="border:0px">
                        <div class="card border-dark mb-3" style="max-width: 100rem;">   
                          <div class="card-header" style="margin-bottom:0px"><strong><a href="/courses/<%=comment.course_id%>" style="color:black"><%=comment.courseid %></a></strong></div>
                          <div class="card-body text-dark" style="margin-top:-10px">
                            <p>Overall: <%= comment.score %> / 5</p>
                            <p>Teaching Quality: <%= comment.teachingQuality_score %> / 5</p>
                            <p>Usefulness: <%= comment.usefulness_score %> / 5</p>
                            <p>Difficulty: <%= comment.difficulty_score %> / 5</p>
                            <p>Workload: <%= comment.workload_score %> / 5</p>
                            <p>GPA: <%= comment.gpa %> / 4</p>
                            <%if current_user&.admin?%>
                            <p><%= comment.posts %></p>
                            <%end%>
                          </div>
                        </div>
                      </div>
                    </div>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      </div>

<%# Jimmy's part finished %>

  </div>
</div>


<!--Interactive Data Visualization Module-->
<!-- Load the AJAX API-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js" d></script>
<script type="text/javascript" >

<!-- Load the visualization API and the bubble chart package-->
  google.charts.load("current", { packages: ["corechart"] });

  <!-- Set a call back to run when the google visualization API is loaded -->
  google.charts.setOnLoadCallback(drawChart);
  google.charts.setOnLoadCallback(drawVisualization);

  function drawVisualization() {
    // Some raw data (not necessarily accurate)
    var data = google.visualization.arrayToDataTable(<%= @sesruoc %>);

    var options = {
      title : 'Course Dashboard',
      vAxis: {title: 'Score'},
      hAxis: {title: 'Course Code'},
      seriesType: 'bars',
      animation:{
        duration: 2000,
        easing: 'inAndOut',
        startup:true

      },

      explorer: {
        maxZoomIn: .5 ,
        maxZoomOut: 8 ,
        keepInBounds: true
     },

     legend:{
       alignment:'center',
       position:'right'
     },

     selectionMode:'multiple',
      series: {5: {type: 'line'}}        };

    var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

  <!-- Callback that creates and populates a data table, instantiates the bubble chart, passes in the data and draws it/-->

  function drawChart() {


    var data = google.visualization.arrayToDataTable(<%= @courses %>);


    <!-- Set chart options-->
    var options = {
      title:'Don\'t know what course to choose? Come here and see!',
    
        animation:{
        duration: 2000,
        easing: 'inAndOut',
        startup:true

      },

      hAxis: { title: 'Workload' },

      vAxis: { title: 'TeachingQuality' },

      bubble: {
        textStyle: {
          fontSize: 12,
          fontName: 'Times-Roman',
          color: 'green',
          bold: true,
          italic: true

        }
      },

      explorer: {

         keepInBounds: true
      },


         keepInBounds: true,
         zoomDelta:1.2,
         maxZoomOut: 2,
         maxZoomIn: .35 
       
      },
      sizeAxis:{
        maxValue:5,
        minValue:0,
        maxSize:45,
        minSize:10
      },

      legend:{
        alignment:'center',
        position:'right'
      },

      selectionMode:'multiple',
      
      sortBubblesBySize:true,
    
      tooltip:{
        showColorCode: true
       
      }
    };
   
    <!--Instantiate and draw our chart, passing in some options-->
    var chart = new google.visualization.BubbleChart(document.getElementById('textstyle'));
    chart.draw(data, options);
  }
  

</script>

</div>
