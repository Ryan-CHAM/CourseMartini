<%#
    VIEW for proposal index page
    PROGRAMMER: Zhou Jinan
    VERSION: last update Apr 23, 2020
    PURPOSE: display all the proposals and their details information.
             allows to porcess proposal.
             only available to admin
%>


<style>
    td{
      white-space: normal !important; 
      word-wrap: break-word; 
    }
    table {
      table-layout: fixed;
    }
</style>
<h1>Proposals to be Processed</h1>

<div class="container-fluid">
  <div class="row">
    <div class="col">
      <%# 1 of 3 %>
    </div>
    <div class="col-12">
      <%# the header of the table %>
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Code</th>
            <th>Subject</th>
            <th>Faculty</th>
            <th>Instructor</th>
            <th>Description</th>
            <th>Book</th>
            <th>Url</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
        <%# display the detailed information of all proposals one by one%>
          <% @proposals.each do |proposal| %>
            <tr>
              <td><%= proposal.id %></td>
              <td><%= proposal.name %></td>
              <td><%= proposal.code %></td>
              <td><%= proposal.subject %></td>
              <td><%= proposal.faculty %></td>
              <td><%= proposal.instructor %></td>
              <td><%= proposal.description %></td>
              <td><%= proposal.book %></td>
              <td><%= proposal.url %></td>
              <td><%= proposal.status %></td>
              <td>
                <%# buttons for process the proposals %>
                <%= button_to 'Process', new_course_path(proposal), :method => :get, :class=>"btn btn-outline-primary btn-sm btn-block" %><br>
                <%= button_to 'Ignore ', proposal_path(proposal), :method => :delete,
                    data: { confirm: 'Are you sure?' }, :class=>"btn btn-outline-danger btn-sm btn-block" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <br>

    </div>
    <div class="col">
      <%# 3 of 3 %>
    </div>
  </div>
  
</div>
